<!-- pages/index/index.wxml -->
<wxs module="con" src="../../wxs/converter.wxs"></wxs>
<navbar gear text="轻话题" class="navbar-index"></navbar>
<view class="underlying">
      <view class='index-subscribe'>
            <!-- <view style="width:240rpx;float:right;" bind:tap="bindViewHot">
                  <image class="img-subcribe" src='../../imgs/add.png'></image>
                  <text>订阅每日热点</text>
            </view> -->
             <button class="subscribe-btn" bind:tap="bindSubscribe">
                  <block wx:if="{{!isSubscribe}}">
                        <image class="img-subcribe" src='../../imgs/add.png'></image>
                        <text>订阅每日热点</text>
                  </block>
                  <block wx:else>
                        <image class="img-subcribe" src='../../imgs/subed.png'></image>
                        <text>已订阅</text>
                  </block>
            </button>
      </view>
      <view class="container">
            <block wx:if="{{returnInfo.posts.length!=0}}">
            <block wx:for="{{returnInfo.posts}}" wx:for-index="index">
                  <block wx:if="{{item.type=='1'}}">
                  <listing card showTitle showIssue clock like tId="{{item.id}}" userId="{{item.user.id}}" avatar="{{item.user.avatar}}">
                        <text slot="user" class="topic-name">{{con.nickNameCon(item.user.nickname)}}</text>
                        <text slot="title" class="text-weight">{{con.contextCon(item.title,16)}}</text>
                        <view slot="context" class="topic-context">{{con.contextCon(item.text,70)}}<a slot="more" style="color:rgb(9,166,220)" wx:if="{{con.isMore(item.text,70)}}">更多</a>
                        </view>
                        <text slot="date">{{con.dateCon(item.creatAt)}}</text>
                        <text slot="like">99</text>
                  </listing>
                  </block>
                  <block wx:elif="{{item.type==2}}">
                        <listing card showTitle clock like tId="{{item.refPostId}}" cId="{{item.id}}" userId="{{item.user.id}}" avatar="{{item.user.avatar}}">
                        <text slot="user" class="comment-name">{{con.nickNameCon(item.user.nickname)}}</text>
                        <text slot="title" class="conmment-weight">#{{con.contextCon(item.refPost.title,16)}}#</text>
                        <view slot="context" class="topic-context">{{con.contextCon(item.text,70)}}<a slot="more" style="color:rgb(9,166,220)" wx:if="{{con.isMore(item.text,70)}}">更多</a>
                        </view>
                        <text slot="date">{{con.dateCon(item.creatAt)}}</text>
                        <text slot="like">99</text>
                  </listing>
                  </block>
            </block>
            </block>
            <block wx:else>
              <view class="no-more">
                <image src="../../imgs/null.png" class="nomore-img{"/>
                <text class="nomore-text">抱歉，没有更多信息了</text>
              </view>
            </block>
      </view> 
</view>